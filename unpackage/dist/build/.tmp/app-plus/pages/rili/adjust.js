(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/rili/adjust"],{"680d":function(t,e,n){"use strict";n("9bf7");var i=s(n("b0ce")),a=s(n("fe2f"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},"9d5b":function(t,e,n){"use strict";n.r(e);var i=n("edc4"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},c6bd:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticStyle:{width:"100vw",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},[n("image",{style:t.imgStyle,attrs:{src:t.src,mode:"aspectFit"}}),n("canvas",{staticStyle:{width:"300px",height:"300px",background:"#EFEFF4",opacity:"0",position:"fixed"},attrs:{"canvas-id":"myCanvas"}}),n("view",{staticClass:"uni-title"},[t._v("亮度/对比度")]),n("slider",{staticStyle:{width:"80vw"},attrs:{min:"-100",max:"100",step:"5",disabled:t.isProcessing,"show-value":"",eventid:"9d927556-0"},on:{change:t.changeVal}}),n("button",{staticStyle:{width:"90vw"},attrs:{type:"primary",disabled:t.isProcessing,eventid:"9d927556-1"},on:{click:function(e){t.end(!0)}}},[t._v("确定")])],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},edc4:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{value:1,src:null,isProcessing:!1}},computed:{imgStyle:function(){return"filter: brightness(".concat(this.value,") contrast(").concat(this.value,");")}},onLoad:function(e){this.src=e.src;var n=t.getSystemInfo();this.screenWidth=n.screenWidth,this.screenHeight=n.screenHeight},methods:{changeVal:function(t){this.value=1+t.detail.value/100},end:function(e){var n=this;this.isProcessing=!0,t.showLoading({title:"",mask:!1}),t.getImageInfo({src:n.src,success:function(e){var i,a,s,c=t.createCanvasContext("myCanvas");e.width>=e.height?(s=e.width/e.height,i=300,a=300/s):(s=e.height/e.width,a=300,i=300/s),c.drawImage(e.path,0,0,i,a),c.draw(),setTimeout(function(){t.canvasToTempFilePath({canvasId:"myCanvas",fileType:"png",width:i,height:a,success:function(e){t.uploadFile({url:"http://shenkeling.top:3001/jimp",filePath:e.tempFilePath,name:"file",formData:{brightness:n.value-1,contrast:n.value-1},success:function(e){console.log(e.data),t.hideLoading(),t.downloadFile({url:"http://shenkeling.top:3001/download",success:function(e){getApp().globalData.imagePath=e.tempFilePath,t.navigateBack()},fail:function(t){console.error("下载失败",t)}})},fail:function(t){console.error("fail!",t)},complete:function(){t.hideLoading()}})},fail:function(t){console.log("canvasToTempFilePath fail:",t)}})},1e3)}})}}};e.default=n}).call(this,n("6e42")["default"])},fe2f:function(t,e,n){"use strict";n.r(e);var i=n("c6bd"),a=n("9d5b");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var c=n("2877"),o=Object(c["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports}},[["680d","common/runtime","common/vendor"]]]);